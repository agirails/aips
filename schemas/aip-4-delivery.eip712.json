{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AGIRAILS AIP-4 Delivery Proof - EIP-712 Type Definitions",
  "description": "EIP-712 structured data types for delivery proof signing (AIP-4)",
  "version": "1.0.0",
  "types": {
    "DeliveryProof": [
      {
        "name": "txId",
        "type": "bytes32"
      },
      {
        "name": "provider",
        "type": "string"
      },
      {
        "name": "consumer",
        "type": "string"
      },
      {
        "name": "resultCID",
        "type": "string"
      },
      {
        "name": "resultHash",
        "type": "bytes32"
      },
      {
        "name": "easAttestationUID",
        "type": "bytes32"
      },
      {
        "name": "deliveredAt",
        "type": "uint256"
      },
      {
        "name": "chainId",
        "type": "uint256"
      },
      {
        "name": "nonce",
        "type": "uint256"
      }
    ]
  },
  "domain": {
    "name": "AGIRAILS",
    "version": "1",
    "chainId": "VARIABLE",
    "verifyingContract": "VARIABLE",
    "note": "chainId should be 84532 (Base Sepolia) or 8453 (Base Mainnet). verifyingContract should be ACTPKernel contract address."
  },
  "primaryType": "DeliveryProof",
  "messageTypeHash": "0x425ced2de607050b98321400e4411aa0eee4eb375290b412216b6cece62260da",
  "exampleUsage": {
    "typescript": "import { _TypedDataEncoder } from 'ethers/lib/utils';\n\nconst types = {\n  DeliveryProof: [\n    { name: 'txId', type: 'bytes32' },\n    { name: 'provider', type: 'string' },\n    { name: 'consumer', type: 'string' },\n    { name: 'resultCID', type: 'string' },\n    { name: 'resultHash', type: 'bytes32' },\n    { name: 'easAttestationUID', type: 'bytes32' },\n    { name: 'deliveredAt', type: 'uint256' },\n    { name: 'chainId', type: 'uint256' },\n    { name: 'nonce', type: 'uint256' }\n  ]\n};\n\nconst domain = {\n  name: 'AGIRAILS',\n  version: '1',\n  chainId: 84532,\n  verifyingContract: kernelAddress\n};\n\nconst message = {\n  txId: '0x...',\n  provider: 'did:ethr:0x...',\n  consumer: 'did:ethr:0x...',\n  resultCID: 'bafybeig...',\n  resultHash: '0x...',\n  easAttestationUID: '0x...',\n  deliveredAt: 1700000000,\n  chainId: 84532,\n  nonce: 1\n};\n\nconst signature = await signer._signTypedData(domain, types, message);"
  }
}
