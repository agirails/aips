{
  "title": "AIP-1 Test Vectors",
  "description": "Comprehensive test cases for AIP-1 request metadata validation and hashing",
  "version": "1.0.0",
  "testVectors": [
    {
      "name": "minimal-valid-request",
      "description": "Minimal valid AIP-1 request with only required fields",
      "valid": true,
      "metadata": {
        "version": "1.0.0",
        "serviceType": "text-generation",
        "requestId": "req_min_001",
        "consumer": "did:ethr:84532:0x1234567890123456789012345678901234567890",
        "provider": "did:ethr:84532:0x0987654321098765432109876543210987654321",
        "chainId": 84532,
        "inputData": {
          "prompt": "Hello world"
        },
        "paymentTerms": {
          "amount": "50000",
          "currency": "USDC",
          "decimals": 6,
          "deadline": 1732000000,
          "disputeWindow": 3600
        },
        "timestamp": 1731700000
      },
      "expectedHash": "0x4969f2a08b14d7895599e137a17caed80b28c777e3f23d7ca47c83ad3bf5ec69",
      "canonicalJSON": "{\"chainId\":84532,\"consumer\":\"did:ethr:84532:0x1234567890123456789012345678901234567890\",\"inputData\":{\"prompt\":\"Hello world\"},\"paymentTerms\":{\"amount\":\"50000\",\"currency\":\"USDC\",\"deadline\":1732000000,\"decimals\":6,\"disputeWindow\":3600},\"provider\":\"did:ethr:84532:0x0987654321098765432109876543210987654321\",\"requestId\":\"req_min_001\",\"serviceType\":\"text-generation\",\"timestamp\":1731700000,\"version\":\"1.0.0\"}"
    },
    {
      "name": "full-featured-request",
      "description": "Complete AIP-1 request with all optional fields",
      "valid": true,
      "metadata": {
        "version": "1.0.0",
        "serviceType": "code-generation",
        "requestId": "req_full_002",
        "consumer": "did:ethr:84532:0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb",
        "provider": "did:ethr:84532:0x8f4e7d2a9c1b5e3f6a8d2c4e1f7b9a3d5c8e2f6a",
        "chainId": 84532,
        "inputData": {
          "language": "python",
          "task": "Create a REST API for user authentication",
          "framework": "FastAPI",
          "includeTests": true
        },
        "deliveryRequirements": {
          "format": "url",
          "schema": "https://schema.agirails.io/code-delivery-v1.json",
          "minQuality": 0.9,
          "maxLatency": 300
        },
        "paymentTerms": {
          "amount": "50000000",
          "currency": "USDC",
          "decimals": 6,
          "maxPrice": "100000000",
          "deadline": 1732200000,
          "disputeWindow": 14400
        },
        "metadata": {
          "priority": "high",
          "callbackUrl": "https://consumer.example.com/webhooks/delivery",
          "tags": ["code", "python", "api"]
        },
        "timestamp": 1731700000
      },
      "expectedHash": "0x71d9914bac1b7af889983b918c753fe1c686a0cbae36889bbb45b4523eb1e69f",
      "canonicalJSON": "{\"chainId\":84532,\"consumer\":\"did:ethr:84532:0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb\",\"deliveryRequirements\":{\"format\":\"url\",\"maxLatency\":300,\"minQuality\":0.9,\"schema\":\"https://schema.agirails.io/code-delivery-v1.json\"},\"inputData\":{\"framework\":\"FastAPI\",\"includeTests\":true,\"language\":\"python\",\"task\":\"Create a REST API for user authentication\"},\"metadata\":{\"callbackUrl\":\"https://consumer.example.com/webhooks/delivery\",\"priority\":\"high\",\"tags\":[\"code\",\"python\",\"api\"]},\"paymentTerms\":{\"amount\":\"50000000\",\"currency\":\"USDC\",\"deadline\":1732200000,\"decimals\":6,\"disputeWindow\":14400,\"maxPrice\":\"100000000\"},\"provider\":\"did:ethr:84532:0x8f4e7d2a9c1b5e3f6a8d2c4e1f7b9a3d5c8e2f6a\",\"requestId\":\"req_full_002\",\"serviceType\":\"code-generation\",\"timestamp\":1731700000,\"version\":\"1.0.0\"}"
    },
    {
      "name": "invalid-missing-version",
      "description": "Missing required 'version' field",
      "valid": false,
      "expectedError": "version is required",
      "metadata": {
        "serviceType": "text-generation",
        "requestId": "req_invalid_001",
        "consumer": "did:ethr:84532:0x1234567890123456789012345678901234567890",
        "provider": "did:ethr:84532:0x0987654321098765432109876543210987654321",
        "chainId": 84532,
        "inputData": {
          "prompt": "Test"
        },
        "paymentTerms": {
          "amount": "50000",
          "currency": "USDC",
          "decimals": 6,
          "deadline": 1732000000,
          "disputeWindow": 3600
        },
        "timestamp": 1731700000
      }
    },
    {
      "name": "invalid-empty-inputdata",
      "description": "inputData must be non-empty object",
      "valid": false,
      "expectedError": "inputData must have at least 1 property",
      "metadata": {
        "version": "1.0.0",
        "serviceType": "text-generation",
        "requestId": "req_invalid_002",
        "consumer": "did:ethr:84532:0x1234567890123456789012345678901234567890",
        "provider": "did:ethr:84532:0x0987654321098765432109876543210987654321",
        "chainId": 84532,
        "inputData": {},
        "paymentTerms": {
          "amount": "50000",
          "currency": "USDC",
          "decimals": 6,
          "deadline": 1732000000,
          "disputeWindow": 3600
        },
        "timestamp": 1731700000
      }
    },
    {
      "name": "invalid-amount-too-small",
      "description": "Amount below $0.05 minimum (50000 base units)",
      "valid": false,
      "expectedError": "amount must be >= 50000 base units ($0.05 USDC with 6 decimals)",
      "metadata": {
        "version": "1.0.0",
        "serviceType": "text-generation",
        "requestId": "req_invalid_003",
        "consumer": "did:ethr:84532:0x1234567890123456789012345678901234567890",
        "provider": "did:ethr:84532:0x0987654321098765432109876543210987654321",
        "chainId": 84532,
        "inputData": {
          "prompt": "Test"
        },
        "paymentTerms": {
          "amount": "1000",
          "currency": "USDC",
          "decimals": 6,
          "deadline": 1732000000,
          "disputeWindow": 3600
        },
        "timestamp": 1731700000
      }
    },
    {
      "name": "invalid-deadline-too-short",
      "description": "Deadline must be at least 1 hour after timestamp",
      "valid": false,
      "expectedError": "deadline must be > timestamp + 3600",
      "metadata": {
        "version": "1.0.0",
        "serviceType": "text-generation",
        "requestId": "req_invalid_004",
        "consumer": "did:ethr:84532:0x1234567890123456789012345678901234567890",
        "provider": "did:ethr:84532:0x0987654321098765432109876543210987654321",
        "chainId": 84532,
        "inputData": {
          "prompt": "Test"
        },
        "paymentTerms": {
          "amount": "50000",
          "currency": "USDC",
          "decimals": 6,
          "deadline": 1731701000,
          "disputeWindow": 3600
        },
        "timestamp": 1731700000
      }
    },
    {
      "name": "invalid-dispute-window-too-short",
      "description": "Dispute window must be at least 1 hour (3600 seconds)",
      "valid": false,
      "expectedError": "disputeWindow must be >= 3600",
      "metadata": {
        "version": "1.0.0",
        "serviceType": "text-generation",
        "requestId": "req_invalid_005",
        "consumer": "did:ethr:84532:0x1234567890123456789012345678901234567890",
        "provider": "did:ethr:84532:0x0987654321098765432109876543210987654321",
        "chainId": 84532,
        "inputData": {
          "prompt": "Test"
        },
        "paymentTerms": {
          "amount": "50000",
          "currency": "USDC",
          "decimals": 6,
          "deadline": 1732000000,
          "disputeWindow": 1800
        },
        "timestamp": 1731700000
      }
    },
    {
      "name": "invalid-dispute-window-too-long",
      "description": "Dispute window cannot exceed 30 days (2592000 seconds)",
      "valid": false,
      "expectedError": "disputeWindow must be <= 2592000",
      "metadata": {
        "version": "1.0.0",
        "serviceType": "text-generation",
        "requestId": "req_invalid_006",
        "consumer": "did:ethr:84532:0x1234567890123456789012345678901234567890",
        "provider": "did:ethr:84532:0x0987654321098765432109876543210987654321",
        "chainId": 84532,
        "inputData": {
          "prompt": "Test"
        },
        "paymentTerms": {
          "amount": "50000",
          "currency": "USDC",
          "decimals": 6,
          "deadline": 1732000000,
          "disputeWindow": 3000000
        },
        "timestamp": 1731700000
      }
    },
    {
      "name": "invalid-wrong-chain",
      "description": "chainId must be 84532 (Base Sepolia) or 8453 (Base Mainnet)",
      "valid": false,
      "expectedError": "chainId must be 84532 or 8453",
      "metadata": {
        "version": "1.0.0",
        "serviceType": "text-generation",
        "requestId": "req_invalid_007",
        "consumer": "did:ethr:84532:0x1234567890123456789012345678901234567890",
        "provider": "did:ethr:84532:0x0987654321098765432109876543210987654321",
        "chainId": 1,
        "inputData": {
          "prompt": "Test"
        },
        "paymentTerms": {
          "amount": "50000",
          "currency": "USDC",
          "decimals": 6,
          "deadline": 1732000000,
          "disputeWindow": 3600
        },
        "timestamp": 1731700000
      }
    },
    {
      "name": "invalid-malformed-did",
      "description": "Consumer DID must follow did:ethr: format",
      "valid": false,
      "expectedError": "consumer must be valid DID",
      "metadata": {
        "version": "1.0.0",
        "serviceType": "text-generation",
        "requestId": "req_invalid_008",
        "consumer": "0x1234567890123456789012345678901234567890",
        "provider": "did:ethr:84532:0x0987654321098765432109876543210987654321",
        "chainId": 84532,
        "inputData": {
          "prompt": "Test"
        },
        "paymentTerms": {
          "amount": "50000",
          "currency": "USDC",
          "decimals": 6,
          "deadline": 1732000000,
          "disputeWindow": 3600
        },
        "timestamp": 1731700000
      }
    },
    {
      "name": "edge-case-max-price-equals-amount",
      "description": "maxPrice can equal amount (no negotiation)",
      "valid": true,
      "metadata": {
        "version": "1.0.0",
        "serviceType": "text-generation",
        "requestId": "req_edge_001",
        "consumer": "did:ethr:84532:0x1234567890123456789012345678901234567890",
        "provider": "did:ethr:84532:0x0987654321098765432109876543210987654321",
        "chainId": 84532,
        "inputData": {
          "prompt": "Test"
        },
        "paymentTerms": {
          "amount": "5000000",
          "currency": "USDC",
          "decimals": 6,
          "maxPrice": "5000000",
          "deadline": 1732000000,
          "disputeWindow": 3600
        },
        "timestamp": 1731700000
      },
      "expectedHash": "0xa10b7733d4a1b9ebf98ede7ece435fbe4e58cc96ee9d35e21e0007c0756aaa89",
      "canonicalJSON": "{\"chainId\":84532,\"consumer\":\"did:ethr:84532:0x1234567890123456789012345678901234567890\",\"inputData\":{\"prompt\":\"Test\"},\"paymentTerms\":{\"amount\":\"5000000\",\"currency\":\"USDC\",\"deadline\":1732000000,\"decimals\":6,\"disputeWindow\":3600,\"maxPrice\":\"5000000\"},\"provider\":\"did:ethr:84532:0x0987654321098765432109876543210987654321\",\"requestId\":\"req_edge_001\",\"serviceType\":\"text-generation\",\"timestamp\":1731700000,\"version\":\"1.0.0\"}"
    },
    {
      "name": "edge-case-mainnet-chain",
      "description": "Valid request on Base Mainnet (chainId 8453)",
      "valid": true,
      "metadata": {
        "version": "1.0.0",
        "serviceType": "text-generation",
        "requestId": "req_mainnet_001",
        "consumer": "did:ethr:8453:0x1234567890123456789012345678901234567890",
        "provider": "did:ethr:8453:0x0987654321098765432109876543210987654321",
        "chainId": 8453,
        "inputData": {
          "prompt": "Production request"
        },
        "paymentTerms": {
          "amount": "1000000",
          "currency": "USDC",
          "decimals": 6,
          "deadline": 1732000000,
          "disputeWindow": 7200
        },
        "timestamp": 1731700000
      },
      "expectedHash": "0xcc6c1199732bc876691623ffb88e8c8bce3e312161126724ee124bbd0ed073f3",
      "canonicalJSON": "{\"chainId\":8453,\"consumer\":\"did:ethr:8453:0x1234567890123456789012345678901234567890\",\"inputData\":{\"prompt\":\"Production request\"},\"paymentTerms\":{\"amount\":\"1000000\",\"currency\":\"USDC\",\"deadline\":1732000000,\"decimals\":6,\"disputeWindow\":7200},\"provider\":\"did:ethr:8453:0x0987654321098765432109876543210987654321\",\"requestId\":\"req_mainnet_001\",\"serviceType\":\"text-generation\",\"timestamp\":1731700000,\"version\":\"1.0.0\"}"
    }
  ],
  "canonicalJsonExamples": [
    {
      "name": "key-sorting",
      "description": "Keys must be sorted alphabetically (recursive)",
      "input": {
        "z": 1,
        "a": 2,
        "m": {
          "y": 3,
          "x": 4
        }
      },
      "canonicalOutput": "{\"a\":2,\"m\":{\"x\":4,\"y\":3},\"z\":1}",
      "expectedHash": "0xb848ad1ba24cced1a1b835adfd3164d77b3fcb4e11eacc18d313d529aca02e81"
    },
    {
      "name": "no-whitespace",
      "description": "All whitespace must be removed",
      "input": {
        "a": 1,
        "b": 2
      },
      "invalidOutputs": [
        "{ \"a\": 1, \"b\": 2 }",
        "{\"a\":1,\n\"b\":2}",
        "{\"a\": 1,\"b\": 2}"
      ],
      "canonicalOutput": "{\"a\":1,\"b\":2}",
      "expectedHash": "0x8f82b2b0ebda0ff96c91ce95ea74bbbc0c83a623bc93f3cf8eb5b34e0acbb16e"
    },
    {
      "name": "number-formatting",
      "description": "Integers have no decimals, floats max 18 decimals",
      "input": {
        "integer": 42,
        "float": 3.14159265358979323846
      },
      "canonicalOutput": "{\"float\":3.141592653589793116,\"integer\":42}",
      "expectedHash": "0xcfb6b25ad4c7d62a3d1c3c2f252e075146eed757a57985205ab15053558d330b"
    }
  ],
  "crossLanguageCompatibility": {
    "description": "Hash must be identical across all language implementations",
    "testCase": {
      "metadata": {
        "version": "1.0.0",
        "serviceType": "text-generation",
        "requestId": "req_cross_lang_001",
        "consumer": "did:ethr:84532:0x1234567890123456789012345678901234567890",
        "provider": "did:ethr:84532:0x0987654321098765432109876543210987654321",
        "chainId": 84532,
        "inputData": {
          "prompt": "Hello"
        },
        "paymentTerms": {
          "amount": "1000000",
          "currency": "USDC",
          "decimals": 6,
          "deadline": 1732000000,
          "disputeWindow": 3600
        },
        "timestamp": 1731700000
      },
      "expectedHash": "0xf769c6c0e3c3c914e1a2b192e853170e250861328c39dbe96b254affd75c1b46",
      "canonicalJSON": "{\"chainId\":84532,\"consumer\":\"did:ethr:84532:0x1234567890123456789012345678901234567890\",\"inputData\":{\"prompt\":\"Hello\"},\"paymentTerms\":{\"amount\":\"1000000\",\"currency\":\"USDC\",\"deadline\":1732000000,\"decimals\":6,\"disputeWindow\":3600},\"provider\":\"did:ethr:84532:0x0987654321098765432109876543210987654321\",\"requestId\":\"req_cross_lang_001\",\"serviceType\":\"text-generation\",\"timestamp\":1731700000,\"version\":\"1.0.0\"}",
      "note": "This hash MUST be identical across all language implementations (TypeScript, Python, Go, Rust, Java). Use this to verify your canonical JSON + keccak256 implementation.",
      "languages": ["TypeScript", "Python", "Go", "Rust", "Java"]
    }
  }
}
